---
title: 页面卡顿分析
date: 2018-09-12 17:28:55
tags: [前端, 浏览器]
---

&emsp;&emsp;如题：计算第N的丑数的值是多少。

<!--more-->

&emsp;&emsp;这道题是我在leetcode上遇到的，首先我的第一反应就是：直接计算从1开始，判断每个数字是否是丑数，找到一个丑数，N就减1，直到N等于0的时候，最后找到的那个丑数，就是我们需要的结果啦。看代码：

1. DOM节点太多？document.all
    100条数据：HTMLAllCollection(12976)
    500条数据：HTMLAllCollection(60972)

    建议懒加载：一次性加载大量数据是不必要的，建议优先加载可视区域的，剩余区域等可见时异步加载
    
2. DOM操作上惹得祸？
    DOM操作的代价很高，页面前端代码的性能瓶颈也大多集中在DOM操作上；
    通过JavaScript代码调用DOM接口，相当于两个独立模块的交互。相比较在同一模块中的调用，这种跨模块的调用其性能损耗是很高的；
    DOM操作对性能影响最大其实还是因为它导致了浏览器的重绘（repaint）和重排（reflow）；

    建议：
    合并多次的DOM操作为单次的DOM操作；
    把DOM元素离线或隐藏后修改；
    使用事件托管方式绑定事件；
    谨慎取得DOM元素的布局信息；
    设置具有动画效果的DOM元素的position属性为fixed或absolute；
    克隆DOM元素到内存中；

```
function fnthUglyNumber(n) {
   
}
```
&emsp;&emsp;结果提交解答的时候，提示：超出时间限制。很明显，这种计算方式，当N偏大的时候，将会非常耗时。我测试了一下，当N等于1407的时候大概计算耗时为：8~9秒。所以，这种傻瓜式的计算，肯定是不会通过的啦。

